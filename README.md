# egg-react-webpack-boilerplate

åŸºäº Egg + React + Webpack æœåŠ¡ç«¯æ¸²æŸ“ SSR (Server Side Render) å’Œ å‰ç«¯æ¸²æŸ“ CSR (Client Side Render) å·¥ç¨‹éª¨æ¶é¡¹ç›®ã€‚

- çº¿ä¸Šè®¿é—®: http://49.233.172.37:7001
- æ–‡æ¡£è¯·è§: [Egg + React å·¥ç¨‹è§£å†³æ–¹æ¡ˆ](https://www.yuque.com/easy-team/egg-react)


## æˆªå›¾

![egg-react-ssr](https://github.com/easy-team/egg-react-webpack-boilerplate/blob/master/docs/images/egg-react-ssr.png)


![egg-react-admin](https://github.com/easy-team/egg-react-webpack-boilerplate/blob/master/docs/images/easy-react-admin.jpg)


## ç‰ˆæœ¬

> åŠŸèƒ½æ€§éœ€æ±‚æˆ–è€…Bugé—®é¢˜, æ¬¢è¿å¤§å®¶ PR å®Œå–„, å¦‚æœä½ éœ€è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·åŠ QQç¾¤: 433207205(å¤‡æ³¨ï¼šNode.js).

å› è¯¥é¡¹ç›®åŒ…å«äº†å¤šç§å®ç°, æä¾›å¤šç§ä¾‹å­å®ç°ï¼Œä¸ºé˜²å¹²æ‰°, ç‰¹æä¾›çº¯å‡€ç‰ˆæœ¬åˆ†æ”¯ç”¨äºå®é™…é¡¹ç›®å¼€å‘, è¯·è‡ªè¡Œé€‰ç”¨ã€‚

- Egg + React SSRå¤šé¡µé¢æœåŠ¡ç«¯æ¸²æŸ“æ–¹æ¡ˆ [feature/green/multi](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/feature/green/multi)
- Egg + React CSR å¤šé¡µé¢å‰ç«¯æ¸²æŸ“æ–¹æ¡ˆ [feature/green/html](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/feature/green/html)
- Egg + React + React Router + Redux + React-Redux å•é¡µé¢æœåŠ¡ç«¯æ¸²æŸ“æ–¹æ¡ˆ [feature/green/spa](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/feature/green/spa)
- Egg + AntD + React Router + Redux + React-Redux  å•é¡µé¢å‰ç«¯æ¸²æŸ“assetæ–¹æ¡ˆ [feature/green/asset](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/feature/green/asset)
- Egg + AntD + React Router + Redux + React-Redux  å•é¡µé¢æœåŠ¡ç«¯æ¸²æŸ“æ–¹æ¡ˆ [antd](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/antd)
- Egg + AntD + React Router + Redux + React-Redux  å•é¡µé¢ç®¡ç†åå°å‰ç«¯æ¸²æŸ“æ–¹æ¡ˆ [easy-admin](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/easy-admin)
- Egg + AntD æŒ‰éœ€é…ç½®å’Œä¸»é¢˜å®šåˆ¶ [antd-theme](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/antd-theme) å’Œ [æ–‡æ¡£](https://www.yuque.com/easy-team/egg-react/antd)
- Egg + React + TypeScript é¡¹ç›®è¯·è§[egg-react-typescript-boilerplate](https://github.com/easy-team/egg-react-typescript-boilerplate)
- Egg + Rax SSRå¤šé¡µé¢æœåŠ¡ç«¯æ¸²æŸ“æ–¹æ¡ˆ [rax](https://github.com/easy-team/egg-react-webpack-boilerplate/tree/rax)


å¯ä»¥é€šè¿‡ [easywebpack-cli](https://github.com/easy-team/easywebpack-cli) å‘½ä»¤è¡Œåˆå§‹åŒ–å¯¹åº”ç±»å‹é¡¹ç›®ã€‚ 

## æ–‡æ¡£

- https://easyjs.cn
- https://www.yuque.com/easy-team/egg-react
- https://zhuanlan.zhihu.com/easyjs

## ç‰¹æ€§

- åŸºäº React å¤šé¡µé¢/å•é¡µé¢æœåŠ¡ç«¯æ¸²æŸ“, å‰ç«¯æ¸²æŸ“ä»¥åŠ asyncData åŒæ„å®ç°

- æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“å¤±è´¥æ—¶, è‡ªåŠ¨é™çº§ä¸ºå‰ç«¯æ¸²æŸ“æ¨¡å¼; æ”¯æŒ react-loadable å¼‚æ­¥ç»„ä»¶æ¸²æŸ“

- æ•°æ®å±‚é¢è¿›è¡Œäº†ç®€å•è®¾è®¡ï¼Œæ”¯æŒ FileDBï¼ŒMySQLï¼ŒMongo æ¥å£

- æ”¯æŒ Node å’Œ å‰ç«¯ä»£ç ä¿®æ”¹ Webpack æ—¶æ—¶ç¼–è¯‘å’Œçƒ­æ›´æ–°

- æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ `render` å’Œçº¯å‰ç«¯æ¸²æŸ“ `renderClient`

- æ”¯æŒè‡ªåŠ¨æ ¹æ® jsx æ–‡ä»¶æ„å»º Webpack entry å…¥å£æ–‡ä»¶

- æ”¯æŒ css, sass, scss, less, stylus

- æ”¯æŒ css module , ä¸”åŒæ—¶æ”¯æŒ css å’Œ css module å…±å­˜çš„æƒ…å†µ

- æ”¯æŒ react-router, react-redux æœåŠ¡ç«¯æ¸²æŸ“(SSR)å’Œå‰ç«¯æ¸²æŸ“(CSR) 

- æ”¯æŒ Webpack dll è‡ªåŠ¨åŒ–æ„å»º, ä¸å¤šè¿›ç¨‹ç¼–è¯‘ç»“åˆï¼Œæ„å»ºé€Ÿåº¦å‡å°‘ 2/3

- Node 8 ç‰ˆæœ¬çš„ async å’Œ await ç‰¹æ€§, Controller é‡‡ç”¨ class æ–¹å¼ç¼–å†™


## ä¾èµ–

- [easywebpack](https://github.com/easy-team/easywebpack) ^4.x.x
- [easywebpack-react](https://github.com/easy-team/easywebpack-react) ^4.x.x
- [egg-view-react-ssr](https://github.com/easy-team/egg-view-react-ssr) ^2.1.0
- [egg-webpack](https://github.com/easy-team/egg-webpack) ^4.x.x
- [egg-webpack-react](https://github.com/easy-team/egg-webpack-react) ^2.0.0

![å·¥ç¨‹åŒ–](http://hubcarl.github.io/img/webpack/egg-webpack-react-ssr.png)


## ä½¿ç”¨

#### å®‰è£…cli

```bash
npm install @easy-team/easywebpack-cli -g
```

#### å®‰è£…ä¾èµ–

```bash
npm install
```


#### æœ¬åœ°å¼€å‘

> å¯åŠ¨æµç¨‹: https://www.yuque.com/easy-team/egg-react/build

```bash
npm run dev
```

åº”ç”¨è®¿é—®: http://127.0.0.1:7001


![npm startå¯åŠ¨](https://github.com/easy-team/egg-react-webpack-boilerplate/blob/master/docs/images/webpack.png)



- æœ¬åœ°å¼€å‘å¯åŠ¨ Webpack æ„å»º, é»˜è®¤é…ç½®æ–‡ä»¶ä¸ºé¡¹ç›®æ ¹ç›®å½• `webpack.config.js` æ–‡ä»¶ã€‚ SSR éœ€è¦é…ç½®ä¸¤ä»½ Webpack é…ç½®ï¼Œæ‰€ä»¥æ„å»ºä¼šåŒæ—¶å¯åŠ¨ä¸¤ä¸ª Webpack æ„å»ºæœåŠ¡ã€‚web è¡¨ç¤ºæ„å»º JSBundle ç»™å‰ç«¯ç”¨ï¼Œæ„å»ºåæ–‡ä»¶ç›®å½• `public`, é»˜è®¤ç«¯å£ 9000; node è¡¨ç¤ºæ„å»º JSBundle ç»™å‰ç«¯ç”¨ï¼Œæ„å»ºåæ–‡ä»¶ç›®å½• `app/view`, é»˜è®¤ç«¯å£ 9001.

- æœ¬åœ°æ„å»ºæ˜¯ Webpack å†…å­˜æ„å»ºï¼Œæ–‡ä»¶ä¸è½åœ°ç£ç›˜ï¼Œæ‰€ä»¥ `app/view` å’Œ `public` åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œæ˜¯çœ‹ä¸åˆ°æ–‡ä»¶çš„ã€‚ åªæœ‰å‘å¸ƒæ¨¡å¼(npm run build)æ‰èƒ½åœ¨è¿™ä¸¤ä¸ªç›®å½•ä¸­çœ‹åˆ°æ„å»ºåçš„å†…å®¹ã€‚


#### çº¿ä¸Šéƒ¨ç½²

> éƒ¨ç½²ç»†èŠ‚è¯·é˜…è¯»ï¼šhttps://www.yuque.com/easy-team/egg-react/online


- é¦–å…ˆåœ¨æœ¬åœ°æˆ–è€…ciæ„å»ºå¥½jsbundleæ–‡ä»¶

```bash
npm run build 
```

- ç„¶å,å¯åŠ¨åº”ç”¨

```bash
npm start 
```

### é…ç½®è¯´æ˜

> https://www.yuque.com/easy-team/egg-react/config

```js
`config/config.local.js` 
const easywebpack = require('@easy-team/easywebpack-react');
exports.webpack = {
  webpackConfigList: easywebpack.getWebpackConfig()
};
```


#### é¡¹ç›®æ„å»º

```bash
// ç›´æ¥è¿è¡Œ(ç¼–è¯‘æ–‡ä»¶å…¨éƒ¨åœ¨å†…å­˜é‡Œé¢,æœ¬åœ°å¼€å‘ä½¿ç”¨)
npm start

// ç¼–è¯‘æ–‡ä»¶åˆ°ç£ç›˜æ‰“åŒ…ä½¿ç”¨(å‘å¸ƒæ­£å¼ç¯å¢ƒ)
npm run build æˆ–è€… easy build

```

## é¡¹ç›®ç»“æ„å’ŒåŸºæœ¬è§„èŒƒ

    â”œâ”€â”€ app
    â”‚Â Â  â”œâ”€â”€ controller
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ test
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ test.js
    â”‚Â Â  â”œâ”€â”€ extend
    â”‚Â Â  â”œâ”€â”€ lib
    â”‚Â Â  â”œâ”€â”€ middleware
    â”‚Â Â  â”œâ”€â”€ mocks
    â”‚Â Â  â”œâ”€â”€ proxy
    â”‚Â Â  â”œâ”€â”€ router.js
    â”‚Â Â  â”œâ”€â”€ view
    â”‚Â Â  â”‚   â”œâ”€â”€ about                         // æœåŠ¡å™¨ç¼–è¯‘çš„jsbundleæ–‡ä»¶
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ about.js
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
    â”‚Â Â  â”‚Â   â”‚Â Â    â””â”€â”€ home.js                 // æœåŠ¡å™¨ç¼–è¯‘çš„jsbundleæ–‡ä»¶
    â”‚Â Â  â”‚Â Â  â””â”€â”€ layout.js                     // ç¼–è¯‘çš„layoutæ–‡ä»¶
    â”‚Â Â  â””â”€â”€ web                               // å‰ç«¯å·¥ç¨‹ç›®å½•
    â”‚Â Â      â”œâ”€â”€ asset                         // å­˜æ”¾å…¬å…±js,cssèµ„æº
    â”‚Â Â      â”œâ”€â”€ framework                     // å‰ç«¯å…¬å…±åº“å’Œç¬¬ä¸‰æ–¹åº“
    â”‚Â Â      â”‚Â Â  â””â”€â”€ entry                          
    â”‚Â Â      â”‚Â Â      â”œâ”€â”€ loader.js              // æ ¹æ®jsxæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆentryå…¥å£æ–‡ä»¶loader
    â”‚Â Â      â”œâ”€â”€ page                              // å‰ç«¯é¡µé¢å’Œwebpackæ„å»ºç›®å½•, ä¹Ÿå°±æ˜¯webpackæ‰“åŒ…é…ç½®entryDir
    â”‚Â Â      â”‚Â Â  â”œâ”€â”€ home                          // æ¯ä¸ªé¡µé¢éµå¾ªç›®å½•å, jsæ–‡ä»¶å, scssæ–‡ä»¶å, jsxæ–‡ä»¶åç›¸åŒ
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home.scss
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home.jsx
    â”‚Â Â      â”‚Â Â  â””â”€â”€ hello                          // æ¯ä¸ªé¡µé¢éµå¾ªç›®å½•å, jsæ–‡ä»¶å, scssæ–‡ä»¶å, jsxæ–‡ä»¶åç›¸åŒ
    â”‚Â Â      â”‚Â Â      â”œâ”€â”€ test.css                   // æœåŠ¡å™¨renderæ¸²æŸ“æ—¶, ä¼ å…¥ render('test/test.js', data)
    â”‚Â Â      â”‚Â Â      â””â”€â”€ test.jsx
    â”‚Â Â      â”œâ”€â”€ store                             
    â”‚Â Â      â”‚Â Â  â”œâ”€â”€ app
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ actions.js
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ getters.js
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.js
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mutation-type.js
    â”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ mutations.js
    â”‚Â Â      â”‚Â Â  â””â”€â”€ store.js
    â”‚Â Â      â””â”€â”€ component                         // å…¬å…±ä¸šåŠ¡ç»„ä»¶, æ¯”å¦‚loading, toastç­‰, éµå¾ªç›®å½•å, jsæ–‡ä»¶å, scssæ–‡ä»¶å, jsxæ–‡ä»¶åç›¸åŒ
    â”‚Â Â          â”œâ”€â”€ loading
    â”‚Â Â          â”‚Â Â  â”œâ”€â”€ loading.scss
    â”‚Â Â          â”‚Â Â  â””â”€â”€ loading.jsx
    â”‚Â Â          â”œâ”€â”€ test
    â”‚Â Â          â”‚Â Â  â”œâ”€â”€ test.jsx
    â”‚Â Â          â”‚Â Â  â””â”€â”€ test.scss
    â”‚Â Â          â””â”€â”€ toast
    â”‚Â Â              â”œâ”€â”€ toast.scss
    â”‚Â Â              â””â”€â”€ toast.jsx
    â”œâ”€â”€ config
    â”‚Â Â  â”œâ”€â”€ config.default.js
    â”‚Â Â  â”œâ”€â”€ config.local.js
    â”‚Â Â  â”œâ”€â”€ config.prod.js
    â”‚Â Â  â”œâ”€â”€ config.test.js
    â”‚Â Â  â””â”€â”€ plugin.js
    â”œâ”€â”€ doc
    â”œâ”€â”€ index.js
    â”œâ”€â”€ webpack.config.js                      // easywebpack-cli æ„å»ºé…ç½®
    â”œâ”€â”€ public                                 // webpackç¼–è¯‘ç›®å½•ç»“æ„, renderæ–‡ä»¶æŸ¥æ‰¾ç›®å½•
    â”‚Â Â  â”œâ”€â”€ static
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ css
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home.07012d33.css
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ test
    â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ test.4bbb32ce.css
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ img
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ change_top.4735c57.png
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ intro.0e66266.png
    â”‚Â Â  â”œâ”€â”€ test
    â”‚Â Â  â”‚Â Â  â””â”€â”€ test.js
    â”‚Â Â  â””â”€â”€ vendor.js                         // ç”Ÿæˆçš„å…¬å…±æ‰“åŒ…åº“


## åŠŸèƒ½å®ç°

### ä¸€.å¤šé¡µé¢æœåŠ¡å™¨æ¸²æŸ“åŒæ„å®ç°

#### 1.ç¼–å†™jsxé¡µé¢

åœ¨app/web/page ç›®å½•ä¸‹é¢åˆ›å»ºhomeç›®å½•, home.jsx, home.cssæ–‡ä»¶.

- home.jsx ç¼–å†™ç•Œé¢é€»è¾‘

```js
import React, { Component } from 'react';
import Header from 'component/layout/standard/header/header.jsx';
import List from 'component/home/list.jsx';
import './home.css';
export default class Home extends Component {
  componentDidMount() {
    console.log('----componentDidMount-----');
  }

  render() {
    return <div>
      <Header></Header>
      <div className="main">
        <div className="page-container page-component">
          <List list={this.props.list}></List>
        </div>
      </div>
    </div>;
  }
}
```


#### 2.å¤šé¡µé¢åç«¯å®ç°

- åˆ›å»ºcontrolleræ–‡ä»¶home.js

```javascript
exports.index = function* (ctx) {
  yield ctx.render('home/home.js', Model.getPage(1, 10));
};
```

- æ·»åŠ è·¯ç”±é…ç½®

```javascript
app.get('/home', app.controller.home.home.index);
```

### 3.å‰ç«¯æ¸²æŸ“

- åˆ›å»ºcontrollerçš„home.js æ·»åŠ å¦‚ä¸‹ä»£ç 

```javascript
exports.client = function* (ctx) {
  yield ctx.renderClient('home/home.js', Model.getPage(1, 10));
};
```

- æ·»åŠ è·¯ç”±é…ç½®

```javascript
app.get('/client', app.controller.home.home.client);
```


## Contributors âœ¨

Thanks goes to these wonderful people ([emoji key](https://allcontributors.org/docs/en/emoji-key)):

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<table>
  <tr>
    <td align="center"><a href="https://easyjs.cn"><img src="https://avatars2.githubusercontent.com/u/4983042?v=4" width="100px;" alt=""/><br /><sub><b>sky</b></sub></a><br /><a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=hubcarl" title="Code">ğŸ’»</a> <a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=hubcarl" title="Documentation">ğŸ“–</a></td>
    <td align="center"><a href="https://github.com/jasonjcpeng"><img src="https://avatars0.githubusercontent.com/u/13363216?v=4" width="100px;" alt=""/><br /><sub><b>jasonjcpeng</b></sub></a><br /><a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=jasonjcpeng" title="Code">ğŸ’»</a> <a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=jasonjcpeng" title="Documentation">ğŸ“–</a></td>
    <td align="center"><a href="https://github.com/willworks"><img src="https://avatars2.githubusercontent.com/u/5542777?v=4" width="100px;" alt=""/><br /><sub><b>Kevin Zhong</b></sub></a><br /><a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=willworks" title="Code">ğŸ’»</a> <a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=willworks" title="Documentation">ğŸ“–</a></td>
    <td align="center"><a href="https://github.com/HiuYanChong"><img src="https://avatars0.githubusercontent.com/u/15319816?v=4" width="100px;" alt=""/><br /><sub><b>HiuYanChong</b></sub></a><br /><a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=HiuYanChong" title="Code">ğŸ’»</a> <a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=HiuYanChong" title="Documentation">ğŸ“–</a></td>
    <td align="center"><a href="https://www.thonatos.com"><img src="https://avatars2.githubusercontent.com/u/958063?v=4" width="100px;" alt=""/><br /><sub><b>Suyi</b></sub></a><br /><a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=thonatos" title="Code">ğŸ’»</a> <a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=thonatos" title="Documentation">ğŸ“–</a></td>
    <td align="center"><a href="https://blog.dada.li"><img src="https://avatars0.githubusercontent.com/u/3274850?v=4" width="100px;" alt=""/><br /><sub><b>Roy Li</b></sub></a><br /><a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=geekdada" title="Code">ğŸ’»</a> <a href="https://github.com/hubcarl/egg-react-webpack-boilerplate/commits?author=geekdada" title="Documentation">ğŸ“–</a></td>
  </tr>
</table>

<!-- markdownlint-enable -->
<!-- prettier-ignore-end -->
<!-- ALL-CONTRIBUTORS-LIST:END -->

This project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!


## License

[MIT](LICENSE)
